{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted';\nimport { CoreEventQueue } from '@segment/analytics-core';\nimport { isOffline } from '../connection';\nvar EventQueue = /** @class */function (_super) {\n  __extends(EventQueue, _super);\n  function EventQueue(nameOrQueue) {\n    return _super.call(this, typeof nameOrQueue === 'string' ? new PersistedPriorityQueue(4, nameOrQueue) : nameOrQueue) || this;\n  }\n  EventQueue.prototype.flush = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        if (isOffline()) return [2 /*return*/, []];\n        return [2 /*return*/, _super.prototype.flush.call(this)];\n      });\n    });\n  };\n  return EventQueue;\n}(CoreEventQueue);\nexport { EventQueue };","map":{"version":3,"names":["PersistedPriorityQueue","CoreEventQueue","isOffline","EventQueue","_super","__extends","nameOrQueue","call","prototype","flush"],"sources":["/Users/bcaudillo/Desktop/Projects/todo/node_modules/@segment/analytics-next/src/core/queue/event-queue.ts"],"sourcesContent":["import { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport { Context } from '../context'\nimport { Plugin } from '../plugin'\nimport { CoreEventQueue } from '@segment/analytics-core'\nimport { isOffline } from '../connection'\n\nexport class EventQueue extends CoreEventQueue<Context, Plugin> {\n  constructor(name: string)\n  constructor(priorityQueue: PriorityQueue<Context>)\n  constructor(nameOrQueue: string | PriorityQueue<Context>) {\n    super(\n      typeof nameOrQueue === 'string'\n        ? new PersistedPriorityQueue(4, nameOrQueue)\n        : nameOrQueue\n    )\n  }\n  async flush(): Promise<Context[]> {\n    if (isOffline()) return []\n    return super.flush()\n  }\n}\n"],"mappings":";AACA,SAASA,sBAAsB,QAAQ,oCAAoC;AAG3E,SAASC,cAAc,QAAQ,yBAAyB;AACxD,SAASC,SAAS,QAAQ,eAAe;AAEzC,IAAAC,UAAA,0BAAAC,MAAA;EAAgCC,SAAA,CAAAF,UAAA,EAAAC,MAAA;EAG9B,SAAAD,WAAYG,WAA4C;WACtDF,MAAA,CAAAG,IAAA,OACE,OAAOD,WAAW,KAAK,QAAQ,GAC3B,IAAIN,sBAAsB,CAAC,CAAC,EAAEM,WAAW,CAAC,GAC1CA,WAAW,CAChB;EACH;EACMH,UAAA,CAAAK,SAAA,CAAAC,KAAK,GAAX;;;QACE,IAAIP,SAAS,EAAE,EAAE,sBAAO,EAAE;QAC1B,sBAAOE,MAAA,CAAAI,SAAA,CAAMC,KAAK,CAAAF,IAAA,MAAE;;;GACrB;EACH,OAAAJ,UAAC;AAAD,CAAC,CAd+BF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}