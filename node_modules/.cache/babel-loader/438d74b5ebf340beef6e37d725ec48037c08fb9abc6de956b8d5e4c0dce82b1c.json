{"ast":null,"code":"function findScript(src) {\n  var scripts = Array.prototype.slice.call(window.document.querySelectorAll('script'));\n  return scripts.find(function (s) {\n    return s.src === src;\n  });\n}\nexport function loadScript(src, attributes) {\n  var found = findScript(src);\n  if (found !== undefined) {\n    var status_1 = found === null || found === void 0 ? void 0 : found.getAttribute('status');\n    if (status_1 === 'loaded') {\n      return Promise.resolve(found);\n    }\n    if (status_1 === 'loading') {\n      return new Promise(function (resolve, reject) {\n        found.addEventListener('load', function () {\n          return resolve(found);\n        });\n        found.addEventListener('error', function (err) {\n          return reject(err);\n        });\n      });\n    }\n  }\n  return new Promise(function (resolve, reject) {\n    var _a;\n    var script = window.document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = src;\n    script.async = true;\n    script.setAttribute('status', 'loading');\n    for (var _i = 0, _b = Object.entries(attributes !== null && attributes !== void 0 ? attributes : {}); _i < _b.length; _i++) {\n      var _c = _b[_i],\n        k = _c[0],\n        v = _c[1];\n      script.setAttribute(k, v);\n    }\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      script.setAttribute('status', 'loaded');\n      resolve(script);\n    };\n    script.onerror = function () {\n      script.onerror = script.onload = null;\n      script.setAttribute('status', 'error');\n      reject(new Error(\"Failed to load \".concat(src)));\n    };\n    var tag = window.document.getElementsByTagName('script')[0];\n    (_a = tag.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(script, tag);\n  });\n}\nexport function unloadScript(src) {\n  var found = findScript(src);\n  if (found !== undefined) {\n    found.remove();\n  }\n  return Promise.resolve();\n}","map":{"version":3,"names":["findScript","src","scripts","Array","prototype","slice","call","window","document","querySelectorAll","find","s","loadScript","attributes","found","undefined","status_1","getAttribute","Promise","resolve","reject","addEventListener","err","script","createElement","type","async","setAttribute","_i","_b","Object","entries","length","_c","k","v","onload","onerror","Error","concat","tag","getElementsByTagName","_a","parentElement","insertBefore","unloadScript","remove"],"sources":["/Users/bcaudillo/Desktop/Projects/todo/node_modules/@segment/analytics-next/src/lib/load-script.ts"],"sourcesContent":["function findScript(src: string): HTMLScriptElement | undefined {\n  const scripts = Array.prototype.slice.call(\n    window.document.querySelectorAll('script')\n  )\n  return scripts.find((s) => s.src === src)\n}\n\nexport function loadScript(\n  src: string,\n  attributes?: Record<string, string>\n): Promise<HTMLScriptElement> {\n  const found = findScript(src)\n\n  if (found !== undefined) {\n    const status = found?.getAttribute('status')\n\n    if (status === 'loaded') {\n      return Promise.resolve(found)\n    }\n\n    if (status === 'loading') {\n      return new Promise((resolve, reject) => {\n        found.addEventListener('load', () => resolve(found))\n        found.addEventListener('error', (err) => reject(err))\n      })\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    const script = window.document.createElement('script')\n\n    script.type = 'text/javascript'\n    script.src = src\n    script.async = true\n\n    script.setAttribute('status', 'loading')\n    for (const [k, v] of Object.entries(attributes ?? {})) {\n      script.setAttribute(k, v)\n    }\n\n    script.onload = (): void => {\n      script.onerror = script.onload = null\n      script.setAttribute('status', 'loaded')\n      resolve(script)\n    }\n\n    script.onerror = (): void => {\n      script.onerror = script.onload = null\n      script.setAttribute('status', 'error')\n      reject(new Error(`Failed to load ${src}`))\n    }\n\n    const tag = window.document.getElementsByTagName('script')[0]\n    tag.parentElement?.insertBefore(script, tag)\n  })\n}\n\nexport function unloadScript(src: string): Promise<void> {\n  const found = findScript(src)\n\n  if (found !== undefined) {\n    found.remove()\n  }\n\n  return Promise.resolve()\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}