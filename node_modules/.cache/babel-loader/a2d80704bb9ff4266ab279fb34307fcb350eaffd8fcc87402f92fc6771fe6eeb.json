{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Track = void 0;\nvar inherits_1 = __importDefault(require(\"inherits\"));\nvar facade_1 = require(\"./facade\");\nvar identify_1 = require(\"./identify\");\nvar is_email_1 = __importDefault(require(\"./is-email\"));\nvar obj_case_1 = __importDefault(require(\"obj-case\"));\nfunction Track(dictionary, opts) {\n  facade_1.Facade.call(this, dictionary, opts);\n}\nexports.Track = Track;\ninherits_1.default(Track, facade_1.Facade);\nvar t = Track.prototype;\nt.action = function () {\n  return \"track\";\n};\nt.type = t.action;\nt.event = facade_1.Facade.field(\"event\");\nt.value = facade_1.Facade.proxy(\"properties.value\");\nt.category = facade_1.Facade.proxy(\"properties.category\");\nt.id = facade_1.Facade.proxy(\"properties.id\");\nt.productId = function () {\n  return this.proxy(\"properties.product_id\") || this.proxy(\"properties.productId\");\n};\nt.promotionId = function () {\n  return this.proxy(\"properties.promotion_id\") || this.proxy(\"properties.promotionId\");\n};\nt.cartId = function () {\n  return this.proxy(\"properties.cart_id\") || this.proxy(\"properties.cartId\");\n};\nt.checkoutId = function () {\n  return this.proxy(\"properties.checkout_id\") || this.proxy(\"properties.checkoutId\");\n};\nt.paymentId = function () {\n  return this.proxy(\"properties.payment_id\") || this.proxy(\"properties.paymentId\");\n};\nt.couponId = function () {\n  return this.proxy(\"properties.coupon_id\") || this.proxy(\"properties.couponId\");\n};\nt.wishlistId = function () {\n  return this.proxy(\"properties.wishlist_id\") || this.proxy(\"properties.wishlistId\");\n};\nt.reviewId = function () {\n  return this.proxy(\"properties.review_id\") || this.proxy(\"properties.reviewId\");\n};\nt.orderId = function () {\n  return this.proxy(\"properties.id\") || this.proxy(\"properties.order_id\") || this.proxy(\"properties.orderId\");\n};\nt.sku = facade_1.Facade.proxy(\"properties.sku\");\nt.tax = facade_1.Facade.proxy(\"properties.tax\");\nt.name = facade_1.Facade.proxy(\"properties.name\");\nt.price = facade_1.Facade.proxy(\"properties.price\");\nt.total = facade_1.Facade.proxy(\"properties.total\");\nt.repeat = facade_1.Facade.proxy(\"properties.repeat\");\nt.coupon = facade_1.Facade.proxy(\"properties.coupon\");\nt.shipping = facade_1.Facade.proxy(\"properties.shipping\");\nt.discount = facade_1.Facade.proxy(\"properties.discount\");\nt.shippingMethod = function () {\n  return this.proxy(\"properties.shipping_method\") || this.proxy(\"properties.shippingMethod\");\n};\nt.paymentMethod = function () {\n  return this.proxy(\"properties.payment_method\") || this.proxy(\"properties.paymentMethod\");\n};\nt.description = facade_1.Facade.proxy(\"properties.description\");\nt.plan = facade_1.Facade.proxy(\"properties.plan\");\nt.subtotal = function () {\n  var subtotal = obj_case_1.default(this.properties(), \"subtotal\");\n  var total = this.total() || this.revenue();\n  if (subtotal) return subtotal;\n  if (!total) return 0;\n  if (this.total()) {\n    var n = this.tax();\n    if (n) total -= n;\n    n = this.shipping();\n    if (n) total -= n;\n    n = this.discount();\n    if (n) total += n;\n  }\n  return total;\n};\nt.products = function () {\n  var props = this.properties();\n  var products = obj_case_1.default(props, \"products\");\n  if (Array.isArray(products)) {\n    return products.filter(function (item) {\n      return item !== null;\n    });\n  }\n  return [];\n};\nt.quantity = function () {\n  var props = this.obj.properties || {};\n  return props.quantity || 1;\n};\nt.currency = function () {\n  var props = this.obj.properties || {};\n  return props.currency || \"USD\";\n};\nt.referrer = function () {\n  return this.proxy(\"context.referrer.url\") || this.proxy(\"context.page.referrer\") || this.proxy(\"properties.referrer\");\n};\nt.query = facade_1.Facade.proxy(\"options.query\");\nt.properties = function (aliases) {\n  var ret = this.field(\"properties\") || {};\n  aliases = aliases || {};\n  for (var alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      var value = this[alias] == null ? this.proxy(\"properties.\" + alias) : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n  return ret;\n};\nt.username = function () {\n  return this.proxy(\"traits.username\") || this.proxy(\"properties.username\") || this.userId() || this.sessionId();\n};\nt.email = function () {\n  var email = this.proxy(\"traits.email\") || this.proxy(\"properties.email\") || this.proxy(\"options.traits.email\");\n  if (email) return email;\n  var userId = this.userId();\n  if (is_email_1.default(userId)) return userId;\n};\nt.revenue = function () {\n  var revenue = this.proxy(\"properties.revenue\");\n  var event = this.event();\n  var orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n  if (!revenue && event && event.match(orderCompletedRegExp)) {\n    revenue = this.proxy(\"properties.total\");\n  }\n  return currency(revenue);\n};\nt.cents = function () {\n  var revenue = this.revenue();\n  return typeof revenue !== \"number\" ? this.value() || 0 : revenue * 100;\n};\nt.identify = function () {\n  var json = this.json();\n  json.traits = this.traits();\n  return new identify_1.Identify(json, this.opts);\n};\nfunction currency(val) {\n  if (!val) return;\n  if (typeof val === \"number\") {\n    return val;\n  }\n  if (typeof val !== \"string\") {\n    return;\n  }\n  val = val.replace(/\\$/g, \"\");\n  val = parseFloat(val);\n  if (!isNaN(val)) {\n    return val;\n  }\n}","map":{"version":3,"names":["inherits_1","__importDefault","require","facade_1","identify_1","is_email_1","obj_case_1","Track","dictionary","opts","Facade","call","exports","default","t","prototype","action","type","event","field","value","proxy","category","id","productId","promotionId","cartId","checkoutId","paymentId","couponId","wishlistId","reviewId","orderId","sku","tax","name","price","total","repeat","coupon","shipping","discount","shippingMethod","paymentMethod","description","plan","subtotal","properties","revenue","n","products","props","Array","isArray","filter","item","quantity","obj","currency","referrer","query","aliases","ret","alias","Object","hasOwnProperty","username","userId","sessionId","email","orderCompletedRegExp","match","cents","identify","json","traits","Identify","val","replace","parseFloat","isNaN"],"sources":["/Users/bcaudillo/Desktop/Projects/todo/node_modules/@segment/facade/lib/track.js"],"sourcesContent":["\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\nimport { Identify } from \"./identify\";\nimport isEmail from \"./is-email\";\nimport get from \"obj-case\";\n\n/**\n * Initialize a new `Track` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.event] - The name of the event being tracked.\n * @param {string} [dictionary.userId] - The ID of the user being tracked.\n * @param {string} [dictionary.anonymousId] - The anonymous ID of the user.\n * @param {string} [dictionary.properties] - Properties of the track event.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Track(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Track, Facade);\n\nlet t = Track.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"track\"`.\n *\n * @return {string}\n */\nt.action = function () {\n  return \"track\";\n};\n\n/**\n * An alias for {@link Track#action}.\n *\n * @function\n * @return {string}\n */\nt.type = t.action;\n\n/**\n * Get the event name from `event`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.event = Facade.field(\"event\");\n\n/**\n * Get the event value, usually the monetary value, from `properties.value`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.value = Facade.proxy(\"properties.value\");\n\n/**\n * Get the event cateogry from `properties.category`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.category = Facade.proxy(\"properties.category\");\n\n/**\n * Get the event ID from `properties.id`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.id = Facade.proxy(\"properties.id\");\n\n/**\n * Get the product ID from `properties.productId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.productId = function () {\n  return (\n    this.proxy(\"properties.product_id\") || this.proxy(\"properties.productId\")\n  );\n};\n\n/**\n * Get the promotion ID from `properties.promotionId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.promotionId = function () {\n  return (\n    this.proxy(\"properties.promotion_id\") ||\n    this.proxy(\"properties.promotionId\")\n  );\n};\n\n/**\n * Get the cart ID from `properties.cartId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.cartId = function () {\n  return this.proxy(\"properties.cart_id\") || this.proxy(\"properties.cartId\");\n};\n\n/**\n * Get the checkout ID from `properties.checkoutId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.checkoutId = function () {\n  return (\n    this.proxy(\"properties.checkout_id\") || this.proxy(\"properties.checkoutId\")\n  );\n};\n\n/**\n * Get the payment ID from `properties.paymentId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.paymentId = function () {\n  return (\n    this.proxy(\"properties.payment_id\") || this.proxy(\"properties.paymentId\")\n  );\n};\n\n/**\n * Get the coupon ID from `properties.couponId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.couponId = function () {\n  return (\n    this.proxy(\"properties.coupon_id\") || this.proxy(\"properties.couponId\")\n  );\n};\n\n/**\n * Get the wishlist ID from `properties.wishlistId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.wishlistId = function () {\n  return (\n    this.proxy(\"properties.wishlist_id\") || this.proxy(\"properties.wishlistId\")\n  );\n};\n\n/**\n * Get the review ID from `properties.reviewId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.reviewId = function () {\n  return (\n    this.proxy(\"properties.review_id\") || this.proxy(\"properties.reviewId\")\n  );\n};\n\n/**\n * Get the order ID from `properties.id` or `properties.orderId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.orderId = function () {\n  // doesn't follow above convention since this fallback order was how it used to be\n  return (\n    this.proxy(\"properties.id\") ||\n    this.proxy(\"properties.order_id\") ||\n    this.proxy(\"properties.orderId\")\n  );\n};\n\n/**\n * Get the SKU from `properties.sku`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.sku = Facade.proxy(\"properties.sku\");\n\n/**\n * Get the amount of tax for this purchase from `properties.tax`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.tax = Facade.proxy(\"properties.tax\");\n\n/**\n * Get the name of this event from `properties.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.name = Facade.proxy(\"properties.name\");\n\n/**\n * Get the price of this purchase from `properties.price`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.price = Facade.proxy(\"properties.price\");\n\n/**\n * Get the total for this purchase from `properties.total`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.total = Facade.proxy(\"properties.total\");\n\n/**\n * Whether this is a repeat purchase from `properties.repeat`.\n *\n * This *should* be a boolean, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {boolean}\n */\nt.repeat = Facade.proxy(\"properties.repeat\");\n\n/**\n * Get the coupon for this purchase from `properties.coupon`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.coupon = Facade.proxy(\"properties.coupon\");\n\n/**\n * Get the shipping for this purchase from `properties.shipping`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.shipping = Facade.proxy(\"properties.shipping\");\n\n/**\n * Get the discount for this purchase from `properties.discount`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.discount = Facade.proxy(\"properties.discount\");\n\n/**\n * Get the shipping method for this purchase from `properties.shippingMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.shippingMethod = function () {\n  return (\n    this.proxy(\"properties.shipping_method\") ||\n    this.proxy(\"properties.shippingMethod\")\n  );\n};\n\n/**\n * Get the payment method for this purchase from `properties.paymentMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.paymentMethod = function () {\n  return (\n    this.proxy(\"properties.payment_method\") ||\n    this.proxy(\"properties.paymentMethod\")\n  );\n};\n\n/**\n * Get a description for this event from `properties.description`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.description = Facade.proxy(\"properties.description\");\n\n/**\n * Get a plan, as in the plan the user is on, for this event from\n * `properties.plan`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.plan = Facade.proxy(\"properties.plan\");\n\n/**\n * Get the subtotal for this purchase from `properties.subtotal`.\n *\n * If `properties.subtotal` isn't available, then fall back to computing the\n * total from `properties.total` or `properties.revenue`, and then subtracting\n * tax, shipping, and discounts.\n *\n * If neither subtotal, total, nor revenue are available, then return 0.\n *\n * @return {number}\n */\nt.subtotal = function () {\n  let subtotal = get(this.properties(), \"subtotal\");\n  let total = this.total() || this.revenue();\n\n  if (subtotal) return subtotal;\n  if (!total) return 0;\n\n  if (this.total()) {\n    let n = this.tax();\n    if (n) total -= n;\n    n = this.shipping();\n    if (n) total -= n;\n    n = this.discount();\n    if (n) total += n;\n  }\n\n  return total;\n};\n\n/**\n * Get the products for this event from `properties.products` if it's an\n * array, falling back to an empty array.\n *\n * @return {Array}\n */\nt.products = function () {\n  let props = this.properties();\n  let products = get(props, \"products\");\n  if (Array.isArray(products)) {\n    return products.filter(item => item !== null)\n  }\n  return [];\n};\n\n/**\n * Get the quantity for this event from `properties.quantity`, falling back to\n * a quantity of one.\n *\n * @return {number}\n */\nt.quantity = function () {\n  let props = this.obj.properties || {};\n  return props.quantity || 1;\n};\n\n/**\n * Get the currency for this event from `properties.currency`, falling back to\n * \"USD\".\n *\n * @return {string}\n */\nt.currency = function () {\n  let props = this.obj.properties || {};\n  return props.currency || \"USD\";\n};\n\n/**\n * Get the referrer for this event from `context.referrer.url`,\n * `context.page.referrer`, or `properties.referrer`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.referrer = function () {\n  // TODO re-examine whether this function is necessary\n  return (\n    this.proxy(\"context.referrer.url\") ||\n    this.proxy(\"context.page.referrer\") ||\n    this.proxy(\"properties.referrer\")\n  );\n};\n\n/**\n * Get the query for this event from `options.query`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string|object}\n */\nt.query = Facade.proxy(\"options.query\");\n\n/**\n * Get the page's properties. This is identical to how {@link Facade#traits}\n * works, except it looks at `properties.*` instead of `options.traits.*`.\n *\n * Properties are gotten from `properties`.\n *\n * The parameter `aliases` is meant to transform keys in `properties` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { properties: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * let track = new Track(obj)\n *\n * track.traits() // { \"foo\": \"bar\" }\n * track.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * track.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nt.properties = function (aliases) {\n  let ret = this.field(\"properties\") || {};\n  aliases = aliases || {};\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"properties.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Get the username of the user for this event from `traits.username`,\n * `properties.username`, `userId`, or `anonymousId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nt.username = function () {\n  return (\n    this.proxy(\"traits.username\") ||\n    this.proxy(\"properties.username\") ||\n    this.userId() ||\n    this.sessionId()\n  );\n};\n\n/**\n * Get the email of the user for this event from `trais.email`,\n * `properties.email`, or `options.traits.email`, falling back to `userId` if\n * it looks like a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nt.email = function () {\n  let email =\n    this.proxy(\"traits.email\") ||\n    this.proxy(\"properties.email\") ||\n    this.proxy(\"options.traits.email\");\n  if (email) return email;\n\n  let userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the revenue for this event.\n *\n * If this is an \"Order Completed\" event, this will be the `properties.total`\n * falling back to the `properties.revenue`. For all other events, this is\n * simply taken from `properties.revenue`.\n *\n * If there are dollar signs in these properties, they will be removed. The\n * result will be parsed into a number.\n *\n * @return {number}\n */\nt.revenue = function () {\n  let revenue = this.proxy(\"properties.revenue\");\n  let event = this.event();\n  let orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n\n  // it's always revenue, unless it's called during an order completion.\n  if (!revenue && event && event.match(orderCompletedRegExp)) {\n    revenue = this.proxy(\"properties.total\");\n  }\n\n  return currency(revenue);\n};\n\n/**\n * Get the revenue for this event in \"cents\" -- in other words, multiply the\n * {@link Track#revenue} by 100, or return 0 if there isn't a numerical revenue\n * for this event.\n *\n * @return {number}\n */\nt.cents = function () {\n  let revenue = this.revenue();\n  return typeof revenue !== \"number\" ? this.value() || 0 : revenue * 100;\n};\n\n/**\n * Convert this event into an {@link Identify} facade.\n *\n * This works by taking this event's underlying object and creating an Identify\n * from it. This event's traits, taken from `options.traits`, will be used as\n * the Identify's traits.\n *\n * @return {Identify}\n */\nt.identify = function () {\n  // TODO: remove me.\n  let json = this.json();\n  json.traits = this.traits();\n  return new Identify(json, this.opts);\n};\n\n/**\n * Get float from currency value.\n *\n * @ignore\n * @param {*} val\n * @return {number}\n */\nfunction currency(val) {\n  if (!val) return;\n  if (typeof val === \"number\") {\n    return val;\n  }\n  if (typeof val !== \"string\") {\n    return;\n  }\n\n  val = val.replace(/\\$/g, \"\");\n  val = parseFloat(val);\n\n  if (!isNaN(val)) {\n    return val;\n  }\n}\n"],"mappings":"AAAA,YAAY;;;;;;;;;;;AAEZ,IAAAA,UAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAJ,eAAA,CAAAC,OAAA;AACA,IAAAI,UAAA,GAAAL,eAAA,CAAAC,OAAA;AAcA,SAAgBK,KAAKA,CAACC,UAAU,EAAEC,IAAI;EACpCN,QAAA,CAAAO,MAAM,CAACC,IAAI,CAAC,IAAI,EAAEH,UAAU,EAAEC,IAAI,CAAC;AACrC;AAFAG,OAAA,CAAAL,KAAA,GAAAA,KAAA;AAIAP,UAAA,CAAAa,OAAO,CAACN,KAAK,EAAEJ,QAAA,CAAAO,MAAM,CAAC;AAEtB,IAAII,CAAC,GAAGP,KAAK,CAACQ,SAAS;AAOvBD,CAAC,CAACE,MAAM,GAAG;EACT,OAAO,OAAO;AAChB,CAAC;AAQDF,CAAC,CAACG,IAAI,GAAGH,CAAC,CAACE,MAAM;AAWjBF,CAAC,CAACI,KAAK,GAAGf,QAAA,CAAAO,MAAM,CAACS,KAAK,CAAC,OAAO,CAAC;AAW/BL,CAAC,CAACM,KAAK,GAAGjB,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,kBAAkB,CAAC;AAW1CP,CAAC,CAACQ,QAAQ,GAAGnB,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,qBAAqB,CAAC;AAWhDP,CAAC,CAACS,EAAE,GAAGpB,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,eAAe,CAAC;AAUpCP,CAAC,CAACU,SAAS,GAAG;EACZ,OACE,IAAI,CAACH,KAAK,CAAC,uBAAuB,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,sBAAsB,CAAC;AAE7E,CAAC;AAUDP,CAAC,CAACW,WAAW,GAAG;EACd,OACE,IAAI,CAACJ,KAAK,CAAC,yBAAyB,CAAC,IACrC,IAAI,CAACA,KAAK,CAAC,wBAAwB,CAAC;AAExC,CAAC;AAUDP,CAAC,CAACY,MAAM,GAAG;EACT,OAAO,IAAI,CAACL,KAAK,CAAC,oBAAoB,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,mBAAmB,CAAC;AAC5E,CAAC;AAUDP,CAAC,CAACa,UAAU,GAAG;EACb,OACE,IAAI,CAACN,KAAK,CAAC,wBAAwB,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,uBAAuB,CAAC;AAE/E,CAAC;AAUDP,CAAC,CAACc,SAAS,GAAG;EACZ,OACE,IAAI,CAACP,KAAK,CAAC,uBAAuB,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,sBAAsB,CAAC;AAE7E,CAAC;AAUDP,CAAC,CAACe,QAAQ,GAAG;EACX,OACE,IAAI,CAACR,KAAK,CAAC,sBAAsB,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,qBAAqB,CAAC;AAE3E,CAAC;AAUDP,CAAC,CAACgB,UAAU,GAAG;EACb,OACE,IAAI,CAACT,KAAK,CAAC,wBAAwB,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,uBAAuB,CAAC;AAE/E,CAAC;AAUDP,CAAC,CAACiB,QAAQ,GAAG;EACX,OACE,IAAI,CAACV,KAAK,CAAC,sBAAsB,CAAC,IAAI,IAAI,CAACA,KAAK,CAAC,qBAAqB,CAAC;AAE3E,CAAC;AAUDP,CAAC,CAACkB,OAAO,GAAG;EAEV,OACE,IAAI,CAACX,KAAK,CAAC,eAAe,CAAC,IAC3B,IAAI,CAACA,KAAK,CAAC,qBAAqB,CAAC,IACjC,IAAI,CAACA,KAAK,CAAC,oBAAoB,CAAC;AAEpC,CAAC;AAWDP,CAAC,CAACmB,GAAG,GAAG9B,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,gBAAgB,CAAC;AAWtCP,CAAC,CAACoB,GAAG,GAAG/B,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,gBAAgB,CAAC;AAWtCP,CAAC,CAACqB,IAAI,GAAGhC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,iBAAiB,CAAC;AAWxCP,CAAC,CAACsB,KAAK,GAAGjC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,kBAAkB,CAAC;AAW1CP,CAAC,CAACuB,KAAK,GAAGlC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,kBAAkB,CAAC;AAW1CP,CAAC,CAACwB,MAAM,GAAGnC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,mBAAmB,CAAC;AAW5CP,CAAC,CAACyB,MAAM,GAAGpC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,mBAAmB,CAAC;AAW5CP,CAAC,CAAC0B,QAAQ,GAAGrC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,qBAAqB,CAAC;AAWhDP,CAAC,CAAC2B,QAAQ,GAAGtC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,qBAAqB,CAAC;AAUhDP,CAAC,CAAC4B,cAAc,GAAG;EACjB,OACE,IAAI,CAACrB,KAAK,CAAC,4BAA4B,CAAC,IACxC,IAAI,CAACA,KAAK,CAAC,2BAA2B,CAAC;AAE3C,CAAC;AAUDP,CAAC,CAAC6B,aAAa,GAAG;EAChB,OACE,IAAI,CAACtB,KAAK,CAAC,2BAA2B,CAAC,IACvC,IAAI,CAACA,KAAK,CAAC,0BAA0B,CAAC;AAE1C,CAAC;AAWDP,CAAC,CAAC8B,WAAW,GAAGzC,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,wBAAwB,CAAC;AAYtDP,CAAC,CAAC+B,IAAI,GAAG1C,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,iBAAiB,CAAC;AAaxCP,CAAC,CAACgC,QAAQ,GAAG;EACX,IAAIA,QAAQ,GAAGxC,UAAA,CAAAO,OAAG,CAAC,IAAI,CAACkC,UAAU,EAAE,EAAE,UAAU,CAAC;EACjD,IAAIV,KAAK,GAAG,IAAI,CAACA,KAAK,EAAE,IAAI,IAAI,CAACW,OAAO,EAAE;EAE1C,IAAIF,QAAQ,EAAE,OAAOA,QAAQ;EAC7B,IAAI,CAACT,KAAK,EAAE,OAAO,CAAC;EAEpB,IAAI,IAAI,CAACA,KAAK,EAAE,EAAE;IAChB,IAAIY,CAAC,GAAG,IAAI,CAACf,GAAG,EAAE;IAClB,IAAIe,CAAC,EAAEZ,KAAK,IAAIY,CAAC;IACjBA,CAAC,GAAG,IAAI,CAACT,QAAQ,EAAE;IACnB,IAAIS,CAAC,EAAEZ,KAAK,IAAIY,CAAC;IACjBA,CAAC,GAAG,IAAI,CAACR,QAAQ,EAAE;IACnB,IAAIQ,CAAC,EAAEZ,KAAK,IAAIY,CAAC;;EAGnB,OAAOZ,KAAK;AACd,CAAC;AAQDvB,CAAC,CAACoC,QAAQ,GAAG;EACX,IAAIC,KAAK,GAAG,IAAI,CAACJ,UAAU,EAAE;EAC7B,IAAIG,QAAQ,GAAG5C,UAAA,CAAAO,OAAG,CAACsC,KAAK,EAAE,UAAU,CAAC;EACrC,IAAIC,KAAK,CAACC,OAAO,CAACH,QAAQ,CAAC,EAAE;IAC3B,OAAOA,QAAQ,CAACI,MAAM,CAAC,UAAAC,IAAI;MAAI,OAAAA,IAAI,KAAK,IAAI;IAAb,CAAa,CAAC;;EAE/C,OAAO,EAAE;AACX,CAAC;AAQDzC,CAAC,CAAC0C,QAAQ,GAAG;EACX,IAAIL,KAAK,GAAG,IAAI,CAACM,GAAG,CAACV,UAAU,IAAI,EAAE;EACrC,OAAOI,KAAK,CAACK,QAAQ,IAAI,CAAC;AAC5B,CAAC;AAQD1C,CAAC,CAAC4C,QAAQ,GAAG;EACX,IAAIP,KAAK,GAAG,IAAI,CAACM,GAAG,CAACV,UAAU,IAAI,EAAE;EACrC,OAAOI,KAAK,CAACO,QAAQ,IAAI,KAAK;AAChC,CAAC;AAWD5C,CAAC,CAAC6C,QAAQ,GAAG;EAEX,OACE,IAAI,CAACtC,KAAK,CAAC,sBAAsB,CAAC,IAClC,IAAI,CAACA,KAAK,CAAC,uBAAuB,CAAC,IACnC,IAAI,CAACA,KAAK,CAAC,qBAAqB,CAAC;AAErC,CAAC;AAWDP,CAAC,CAAC8C,KAAK,GAAGzD,QAAA,CAAAO,MAAM,CAACW,KAAK,CAAC,eAAe,CAAC;AAyBvCP,CAAC,CAACiC,UAAU,GAAG,UAAUc,OAAO;EAC9B,IAAIC,GAAG,GAAG,IAAI,CAAC3C,KAAK,CAAC,YAAY,CAAC,IAAI,EAAE;EACxC0C,OAAO,GAAGA,OAAO,IAAI,EAAE;EAEvB,KAAK,IAAME,KAAK,IAAIF,OAAO,EAAE;IAC3B,IAAIG,MAAM,CAACjD,SAAS,CAACkD,cAAc,CAACtD,IAAI,CAACkD,OAAO,EAAEE,KAAK,CAAC,EAAE;MACxD,IAAM3C,KAAK,GAAG,IAAI,CAAC2C,KAAK,CAAC,IAAI,IAAI,GAC7B,IAAI,CAAC1C,KAAK,CAAC,aAAa,GAAG0C,KAAK,CAAC,GACjC,IAAI,CAACA,KAAK,CAAC,EAAE;MACjB,IAAI3C,KAAK,IAAI,IAAI,EAAE;MACnB0C,GAAG,CAACD,OAAO,CAACE,KAAK,CAAC,CAAC,GAAG3C,KAAK;MAC3B,OAAO0C,GAAG,CAACC,KAAK,CAAC;;;EAIrB,OAAOD,GAAG;AACZ,CAAC;AAWDhD,CAAC,CAACoD,QAAQ,GAAG;EACX,OACE,IAAI,CAAC7C,KAAK,CAAC,iBAAiB,CAAC,IAC7B,IAAI,CAACA,KAAK,CAAC,qBAAqB,CAAC,IACjC,IAAI,CAAC8C,MAAM,EAAE,IACb,IAAI,CAACC,SAAS,EAAE;AAEpB,CAAC;AAYDtD,CAAC,CAACuD,KAAK,GAAG;EACR,IAAIA,KAAK,GACP,IAAI,CAAChD,KAAK,CAAC,cAAc,CAAC,IAC1B,IAAI,CAACA,KAAK,CAAC,kBAAkB,CAAC,IAC9B,IAAI,CAACA,KAAK,CAAC,sBAAsB,CAAC;EACpC,IAAIgD,KAAK,EAAE,OAAOA,KAAK;EAEvB,IAAIF,MAAM,GAAG,IAAI,CAACA,MAAM,EAAE;EAC1B,IAAI9D,UAAA,CAAAQ,OAAO,CAACsD,MAAM,CAAC,EAAE,OAAOA,MAAM;AACpC,CAAC;AAcDrD,CAAC,CAACkC,OAAO,GAAG;EACV,IAAIA,OAAO,GAAG,IAAI,CAAC3B,KAAK,CAAC,oBAAoB,CAAC;EAC9C,IAAIH,KAAK,GAAG,IAAI,CAACA,KAAK,EAAE;EACxB,IAAIoD,oBAAoB,GAAG,iEAAiE;EAG5F,IAAI,CAACtB,OAAO,IAAI9B,KAAK,IAAIA,KAAK,CAACqD,KAAK,CAACD,oBAAoB,CAAC,EAAE;IAC1DtB,OAAO,GAAG,IAAI,CAAC3B,KAAK,CAAC,kBAAkB,CAAC;;EAG1C,OAAOqC,QAAQ,CAACV,OAAO,CAAC;AAC1B,CAAC;AASDlC,CAAC,CAAC0D,KAAK,GAAG;EACR,IAAIxB,OAAO,GAAG,IAAI,CAACA,OAAO,EAAE;EAC5B,OAAO,OAAOA,OAAO,KAAK,QAAQ,GAAG,IAAI,CAAC5B,KAAK,EAAE,IAAI,CAAC,GAAG4B,OAAO,GAAG,GAAG;AACxE,CAAC;AAWDlC,CAAC,CAAC2D,QAAQ,GAAG;EAEX,IAAIC,IAAI,GAAG,IAAI,CAACA,IAAI,EAAE;EACtBA,IAAI,CAACC,MAAM,GAAG,IAAI,CAACA,MAAM,EAAE;EAC3B,OAAO,IAAIvE,UAAA,CAAAwE,QAAQ,CAACF,IAAI,EAAE,IAAI,CAACjE,IAAI,CAAC;AACtC,CAAC;AASD,SAASiD,QAAQA,CAACmB,GAAG;EACnB,IAAI,CAACA,GAAG,EAAE;EACV,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;IAC3B,OAAOA,GAAG;;EAEZ,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;IAC3B;;EAGFA,GAAG,GAAGA,GAAG,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EAC5BD,GAAG,GAAGE,UAAU,CAACF,GAAG,CAAC;EAErB,IAAI,CAACG,KAAK,CAACH,GAAG,CAAC,EAAE;IACf,OAAOA,GAAG;;AAEd","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}